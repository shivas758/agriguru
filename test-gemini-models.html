<!DOCTYPE html>
<html>
<head>
  <title>Test Gemini Models</title>
</head>
<body>
  <h1>Testing Gemini API Models</h1>
  <button onclick="listModels()">List Available Models</button>
  <button onclick="testVision()">Test Vision</button>
  <pre id="output"></pre>

  <script type="module">
    import { GoogleGenerativeAI } from 'https://esm.run/@google/generative-ai';
    
    const API_KEY = 'YOUR_API_KEY_HERE'; // Replace with actual key
    const genAI = new GoogleGenerativeAI(API_KEY);
    
    window.listModels = async function() {
      const output = document.getElementById('output');
      output.textContent = 'Fetching models...\n';
      
      try {
        // Try to list models via direct API call
        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`
        );
        const data = await response.json();
        
        output.textContent = 'Available Models:\n\n';
        if (data.models) {
          data.models.forEach(model => {
            output.textContent += `${model.name}\n`;
            output.textContent += `  Supports: ${model.supportedGenerationMethods?.join(', ')}\n\n`;
          });
        } else {
          output.textContent += JSON.stringify(data, null, 2);
        }
      } catch (error) {
        output.textContent = 'Error: ' + error.message;
      }
    };
    
    window.testVision = async function() {
      const output = document.getElementById('output');
      
      // Try different model names
      const modelsToTry = [
        'gemini-pro-vision',
        'gemini-1.5-flash',
        'gemini-1.5-pro',
        'gemini-1.5-flash-001',
        'gemini-1.5-pro-001',
        'models/gemini-pro-vision',
        'models/gemini-1.5-flash'
      ];
      
      for (const modelName of modelsToTry) {
        try {
          output.textContent += `\nTrying model: ${modelName}...\n`;
          const model = genAI.getGenerativeModel({ model: modelName });
          const result = await model.generateContent(['Test']);
          output.textContent += `✅ ${modelName} WORKS!\n`;
          break;
        } catch (error) {
          output.textContent += `❌ ${modelName} failed: ${error.message}\n`;
        }
      }
    };
  </script>
</body>
</html>
